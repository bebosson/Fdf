/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   main.c                                             :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: bebosson <marvin@42.fr>                    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2019/02/14 06:09:09 by bebosson          #+#    #+#             */
/*   Updated: 2019/03/10 14:25:08 by bebosson         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "Fdf.h"
#define TILE_WIDTH_HALF 64
#define TILE_HEIGHT_HALF 32
void	ligne_oblique(t_win *display, t_point *list)
{
	int x;
	int y;
	t_point *tmp;

	tmp = list;
	x = 0;
	y = 0;
	while (tmp->next)
	{
		ligne(x, y, display->x_win, y, display);
		ligne(x, y, x, display->y_win, display);
		printf("x = %d / ", x);
		printf("tmp->x = %d / ",tmp->x);
		printf("y = %d / ", y);
		printf("coucou \n");
		x = tmp->x * 64;
		y = tmp->y * 32;
		tmp = tmp->next;
//		tmp->x *= 2;
//		tmp->y *= 2;
	}
	display_display(display);
	display_repere(list);
}

void	graphic(t_win *display, int x_win, int y_win, t_point *list)
{
	void	*mlx_ptr;
	void	*win_ptr;
	int x;
	int y;

	display->mlx = mlx_init();
	mlx_ptr = (display)->mlx;
	display->screen = 1000;
	(display)->win_ptr_s = mlx_new_window(mlx_ptr, display->screen, display->screen,"juepee");
	win_ptr = display->win_ptr_s;
//	if (!(tclique =(t_point*)malloc(sizeof(t_point))))
//		return ;
//	display->tpoint = tclique;
	
	set_display(display, x_win, y_win, 50);
	ligne_oblique(display,list);
	ligne (0,64,64,64, display);
	ligne (64,0,128,0, display);
	ligne (0,64,64,0, display);
	ligne (64,64,128,0, display);
	if (mlx_key_hook(win_ptr, deal_key,display) == 0)
		mlx_ptr = NULL;
//	mlx_mouse_hook(win_ptr, barre_pixel,display);
	if (mlx_ptr)
		mlx_loop(mlx_ptr);

}


int		coor_to_graph(char **av)
{
	int x_win;
	int y_win;
	t_win	*display;
	t_point *list;
	display =(t_win *)malloc(sizeof(t_win));
	list = read_to_list(av, &x_win, &y_win);

	graphic(display, x_win, y_win, list);
	return (0);
}


int main(int ac, char **av)
{
	coor_to_graph(av);
		return (0);
}
